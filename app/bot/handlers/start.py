"""
–£–ø—Ä–æ—â—ë–Ω–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã /start
"""
import logging
from aiogram import Router, F, types
from aiogram.filters import Command, CommandStart
from aiogram.fsm.context import FSMContext
from sqlalchemy.ext.asyncio import AsyncSession
from sqlalchemy import select
from typing import Optional
from aiogram.types import Message, InlineKeyboardMarkup, InlineKeyboardButton, WebAppInfo

from app.models.user import User
from app.bot.keyboards.inline import get_main_menu_keyboard, get_help_keyboard
from app.bot.keyboards.reply import get_main_reply_keyboard
from app.database import get_async_session
from app.services.user_service import get_or_create_user

logger = logging.getLogger(__name__)
router = Router()


async def get_or_create_user(
    session: AsyncSession,
    telegram_id: int,
    username: Optional[str],
    first_name: Optional[str],
    last_name: Optional[str],
) -> User:
    """–ü–æ–ª—É—á–µ–Ω–∏–µ –∏–ª–∏ —Å–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"""
    result = await session.execute(
        select(User).where(User.telegram_id == telegram_id)
    )
    user = result.scalars().first()

    if user:
        return user
    
    new_user = User(
        telegram_id=telegram_id,
        username=username,
        first_name=first_name,
        last_name=last_name,
    )
    session.add(new_user)
    await session.commit()
    await session.refresh(new_user)
    return new_user


@router.message(CommandStart())
async def cmd_start(message: Message):
    """–£–ø—Ä–æ—â—ë–Ω–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞ —Å—Ç–∞—Ä—Ç"""
    try:
        async for session in get_async_session():
            # –°–æ–∑–¥–∞—ë–º/–ø–æ–ª—É—á–∞–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            user = await get_or_create_user(
                session=session,
                telegram_id=message.from_user.id,
                username=message.from_user.username,
                first_name=message.from_user.first_name,
                last_name=message.from_user.last_name,
            )
            
            logger.info(f"[START] –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–π–¥–µ–Ω/—Å–æ–∑–¥–∞–Ω: {user.id} ({user.username})")
            
            # –°–æ–∑–¥–∞—ë–º –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É —Å –∫–∞–ª–µ–Ω–¥–∞—Ä—ë–º
            calendar_keyboard = InlineKeyboardMarkup(
                inline_keyboard=[
                    [
                        InlineKeyboardButton(
                            text="üìÖ –ú–æ–π –∫–∞–ª–µ–Ω–¥–∞—Ä—å",
                            web_app=WebAppInfo(url="https://your-domain.com/miniapp/main.html")
                        )
                    ],
                    [
                        InlineKeyboardButton(text="‚ùì –ü–æ–º–æ—â—å", callback_data="help")
                    ]
                ]
            )
            
            # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ
            welcome_text = (
                f"üëã <b>–ü—Ä–∏–≤–µ—Ç, {message.from_user.first_name}!</b>\n\n"
                "ü§ñ –Ø –≤–∞—à –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –∫–∞–ª–µ–Ω–¥–∞—Ä—å-–ø–æ–º–æ—â–Ω–∏–∫.\n\n"
                "<b>–ß—Ç–æ —è —É–º–µ—é:</b>\n"
                "üìù –°–æ–∑–¥–∞–≤–∞—Ç—å —Å–æ–±—ã—Ç–∏—è –∏–∑ —Ç–µ–∫—Å—Ç–∞\n"
                "üé§ –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞—Ç—å –≥–æ–ª–æ—Å–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è\n"
                "üì∏ –ß–∏—Ç–∞—Ç—å —Ç–µ–∫—Å—Ç —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π\n"
                "üìÖ –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –∫–∞–ª–µ–Ω–¥–∞—Ä—å —Å–æ–±—ã—Ç–∏–π\n\n"
                "<b>–ü—Ä–æ—Å—Ç–æ –Ω–∞–ø–∏—à–∏—Ç–µ:</b>\n"
                "‚Ä¢ ¬´–í—Å—Ç—Ä–µ—á–∞ –∑–∞–≤—Ç—Ä–∞ –≤ 15:00¬ª\n"
                "‚Ä¢ ¬´–ó–≤–æ–Ω–æ–∫ –∫–ª–∏–µ–Ω—Ç—É —Å–µ–≥–æ–¥–Ω—è –≤ 17:30¬ª\n"
                "‚Ä¢ ¬´–ü–æ–∫–∞–∑ –∫–≤–∞—Ä—Ç–∏—Ä—ã –≤ –ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫¬ª\n\n"
                "–ò–ª–∏ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ –≥–æ–ª–æ—Å–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ/—Ñ–æ—Ç–æ üì±"
            )
            
            await message.answer(
                welcome_text,
                reply_markup=calendar_keyboard,
                parse_mode="HTML"
            )
            
            logger.info(f"[START] –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é {user.id}")
            break
            
    except Exception as e:
        logger.error(f"[START] –û—à–∏–±–∫–∞: {e}")
        await message.answer(
            "‚ùå –ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ.\n"
            "–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â—ë —Ä–∞–∑ —á–µ—Ä–µ–∑ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–µ–∫—É–Ω–¥.",
            parse_mode="HTML"
        )


@router.message(Command("help"))
async def cmd_help(message: types.Message) -> None:
    logger.info(f"[HELP] –ü–æ–ª—É—á–µ–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ /help –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è {message.from_user.id}")
    """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã /help"""
    
    help_text = """
üìñ <b>–ü–æ–¥—Ä–æ–±–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</b>

<b>üéØ –û–°–ù–û–í–ù–´–ï –§–£–ù–ö–¶–ò–ò:</b>

üìÖ <b>–ö–ê–õ–ï–ù–î–ê–†–¨</b>
‚Ä¢ –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π
‚Ä¢ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –¥–∞—Ç–∞–º –∏ —Ç–∏–ø–∞–º —Å–æ–±—ã—Ç–∏–π
‚Ä¢ –ë—ã—Å—Ç—Ä—ã–π –ø–µ—Ä–µ—Ö–æ–¥ –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É –¥–Ω—é

‚ûï <b>–°–û–ó–î–ê–ù–ò–ï –°–û–ë–´–¢–ò–ô</b>
‚Ä¢ –¢–µ–∫—Å—Ç: "–ü–æ–∫–∞–∑ 2-–∫–æ–º–Ω –∫–≤ –∑–∞–≤—Ç—Ä–∞ –≤ 15:00"
‚Ä¢ –ì–æ–ª–æ—Å: –∑–∞–ø–∏—à–∏—Ç–µ –≥–æ–ª–æ—Å–æ–≤–æ–µ —Å –¥–µ—Ç–∞–ª—è–º–∏
‚Ä¢ –§–æ—Ç–æ: –æ—Ç–ø—Ä–∞–≤—å—Ç–µ —Å–∫—Ä–∏–Ω—à–æ—Ç –ø–µ—Ä–µ–ø–∏—Å–∫–∏ —Å –∫–ª–∏–µ–Ω—Ç–æ–º

üë• <b>–ö–õ–ò–ï–ù–¢–´</b>
‚Ä¢ –ë–∞–∑–∞ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤ –ø–æ–∫—É–ø–∞—Ç–µ–ª–µ–π/–ø—Ä–æ–¥–∞–≤—Ü–æ–≤
‚Ä¢ –ò—Å—Ç–æ—Ä–∏—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–π
‚Ä¢ –ó–∞–º–µ—Ç–∫–∏ –∏ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è

üè† <b>–û–ë–™–ï–ö–¢–´</b>
‚Ä¢ –ö–∞—Ç–∞–ª–æ–≥ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏
‚Ä¢ –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ –∏ —Ñ–æ—Ç–æ
‚Ä¢ –°—Ç–∞—Ç—É—Å –ø—Ä–æ–¥–∞–∂

üìä <b>–ê–ù–ê–õ–ò–¢–ò–ö–ê</b>
‚Ä¢ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–∫–∞–∑–æ–≤
‚Ä¢ –ö–æ–Ω–≤–µ—Ä—Å–∏—è –≤ —Å–¥–µ–ª–∫–∏
‚Ä¢ –î–æ—Ö–æ–¥—ã –ø–æ –ø–µ—Ä–∏–æ–¥–∞–º

<b>üí° –ü–†–ò–ú–ï–†–´ –ö–û–ú–ê–ù–î:</b>

üìù <b>–¢–µ–∫—Å—Ç–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è:</b>
‚Ä¢ "–ü–æ–∫–∞–∑ —Ç—Ä–µ—à–∫–∏ –Ω–∞ –ü—É—à–∫–∏–Ω–∞ –∑–∞–≤—Ç—Ä–∞ –≤ 14:00"
‚Ä¢ "–ó–≤–æ–Ω–æ–∫ –ü–µ—Ç—Ä–æ–≤—É —á–µ—Ä–µ–∑ —á–∞—Å"
‚Ä¢ "–í—Å—Ç—Ä–µ—á–∞ –≤ –æ—Ñ–∏—Å–µ –≤ –ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫ –≤ 10:00"
‚Ä¢ "–ü–æ–¥–ø–∏—Å–∞–Ω–∏–µ –¥–æ–≥–æ–≤–æ—Ä–∞ 25 —á–∏—Å–ª–∞ –≤ 16:30"

üé§ <b>–ì–æ–ª–æ—Å–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è:</b>
–°–∫–∞–∂–∏—Ç–µ: "–ó–∞–ø–ª–∞–Ω–∏—Ä—É–π –ø–æ–∫–∞–∑ –¥–≤—É—à–∫–∏ –∫–ª–∏–µ–Ω—Ç—É –ò–≤–∞–Ω–æ–≤—É –∑–∞–≤—Ç—Ä–∞ –≤ –¥–≤–∞ —á–∞—Å–∞ –¥–Ω—è"

üì∏ <b>–§–æ—Ç–æ –∏ —Å–∫—Ä–∏–Ω—à–æ—Ç—ã:</b>
‚Ä¢ –°–∫—Ä–∏–Ω—à–æ—Ç WhatsApp —Å –¥–æ–≥–æ–≤–æ—Ä–µ–Ω–Ω–æ—Å—Ç—å—é
‚Ä¢ –§–æ—Ç–æ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –∏–ª–∏ –ø–ª–∞–Ω–∏—Ä–æ–≤–∫–∏
‚Ä¢ –°–∫–∞–Ω –¥–æ–≥–æ–≤–æ—Ä–∞ –∏–ª–∏ —Å–ø—Ä–∞–≤–∫–∏

<b>‚öôÔ∏è –ö–û–ú–ê–ù–î–´:</b>
/start - –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
/help - —ç—Ç–∞ —Å–ø—Ä–∞–≤–∫–∞
/calendar - –æ—Ç–∫—Ä—ã—Ç—å –∫–∞–ª–µ–Ω–¥–∞—Ä—å
/settings - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

<b>üÜò –ù—É–∂–Ω–∞ –ø–æ–º–æ—â—å?</b>
–ù–∞–ø–∏—à–∏—Ç–µ "–ø–æ–º–æ—â—å" –∏–ª–∏ –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É
    """
    
    await message.answer(
        help_text,
        reply_markup=get_help_keyboard(),
        parse_mode="HTML"
    )


@router.message(Command("settings"))
async def cmd_settings(message: types.Message) -> None:
    logger.info(f"[SETTINGS] –ü–æ–ª—É—á–µ–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ /settings –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è {message.from_user.id}")
    """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã /settings"""
    
    settings_text = """
‚öôÔ∏è <b>–ù–∞—Å—Ç—Ä–æ–π–∫–∏</b>

–ó–¥–µ—Å—å –≤—ã –º–æ–∂–µ—Ç–µ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å:
‚Ä¢ –í—Ä–µ–º–µ–Ω–Ω—É—é –∑–æ–Ω—É
‚Ä¢ –ò–Ω—Ç–µ—Ä–≤–∞–ª—ã –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π
‚Ä¢ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
‚Ä¢ –Ø–∑—ã–∫ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞

<i>–§—É–Ω–∫—Ü–∏—è –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ...</i>
    """
    
    await message.answer(settings_text, parse_mode="HTML")


# –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–Ω–æ–ø–æ–∫ –º–µ–Ω—é
@router.message(F.text == "üìÖ –ö–∞–ª–µ–Ω–¥–∞—Ä—å")
async def menu_calendar(message: types.Message):
    """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–∫–∏ –ö–∞–ª–µ–Ω–¥–∞—Ä—å"""
    text = """
üìÖ <b>–í–∞—à –∫–∞–ª–µ–Ω–¥–∞—Ä—å</b>

<b>–ß—Ç–æ –≤—ã –º–æ–∂–µ—Ç–µ –¥–µ–ª–∞—Ç—å:</b>
‚Ä¢ –ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å —Å–æ–±—ã—Ç–∏—è –Ω–∞ —Å–µ–≥–æ–¥–Ω—è
‚Ä¢ –ü–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –≤—Å—Ç—Ä–µ—á–∏ –Ω–∞ –∑–∞–≤—Ç—Ä–∞
‚Ä¢ –ò—Å–∫–∞—Ç—å —Å–≤–æ–±–æ–¥–Ω–æ–µ –≤—Ä–µ–º—è
‚Ä¢ –ü–æ–ª—É—á–∞—Ç—å –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è

<b>–ë—ã—Å—Ç—Ä—ã–µ –∫–æ–º–∞–Ω–¥—ã:</b>
‚Ä¢ "–ø–æ–∫–∞–∑–∞—Ç—å –∫–∞–ª–µ–Ω–¥–∞—Ä—å –Ω–∞ –∑–∞–≤—Ç—Ä–∞"
‚Ä¢ "—á—Ç–æ —É –º–µ–Ω—è –≤ –ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫"
‚Ä¢ "—Å–≤–æ–±–æ–¥–Ω–æ–µ –≤—Ä–µ–º—è –Ω–∞ —ç—Ç–æ–π –Ω–µ–¥–µ–ª–µ"

<i>–ü–æ–ª–Ω–∞—è –≤–µ—Ä—Å–∏—è –∫–∞–ª–µ–Ω–¥–∞—Ä—è –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ...</i>
    """
    await message.answer(text, parse_mode="HTML")


@router.message(F.text == "‚ûï –°–æ–±—ã—Ç–∏–µ")
async def menu_create_event(message: types.Message):
    """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–∫–∏ –°–æ–∑–¥–∞—Ç—å —Å–æ–±—ã—Ç–∏–µ"""
    text = """
‚ûï <b>–°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Å–æ–±—ã—Ç–∏—è</b>

<b>–ü—Ä–æ—Å—Ç–æ –Ω–∞–ø–∏—à–∏—Ç–µ –∏–ª–∏ —Å–∫–∞–∂–∏—Ç–µ:</b>

üìù <b>–ü—Ä–∏–º–µ—Ä—ã —Ç–µ–∫—Å—Ç–∞:</b>
‚Ä¢ "–ü–æ–∫–∞–∑ 3-–∫–æ–º–Ω –∫–≤–∞—Ä—Ç–∏—Ä—ã –∑–∞–≤—Ç—Ä–∞ –≤ 15:00"
‚Ä¢ "–í—Å—Ç—Ä–µ—á–∞ —Å –ü–µ—Ç—Ä–æ–≤—ã–º–∏ –≤ –æ—Ñ–∏—Å–µ –≤ –ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫ –≤ 10:00"
‚Ä¢ "–ó–≤–æ–Ω–æ–∫ –∫–ª–∏–µ–Ω—Ç—É –ò–≤–∞–Ω–æ–≤—É —á–µ—Ä–µ–∑ —á–∞—Å"
‚Ä¢ "–ü–æ–¥–ø–∏—Å–∞–Ω–∏–µ –¥–æ–≥–æ–≤–æ—Ä–∞ 25 —á–∏—Å–ª–∞ –≤ 16:30"

üé§ <b>–ì–æ–ª–æ—Å–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ:</b>
–ó–∞–ø–∏—à–∏—Ç–µ –≥–æ–ª–æ—Å–æ–≤–æ–µ —Å –¥–µ—Ç–∞–ª—è–º–∏ –≤—Å—Ç—Ä–µ—á–∏

üì∏ <b>–û—Ç–ø—Ä–∞–≤—å—Ç–µ —Ñ–æ—Ç–æ:</b>
–°–∫—Ä–∏–Ω—à–æ—Ç –ø–µ—Ä–µ–ø–∏—Å–∫–∏ –∏–ª–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞

<b>–ù–∞–ø–∏—à–∏—Ç–µ –≤–∞—à–µ —Å–æ–±—ã—Ç–∏–µ –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å!</b>
    """
    await message.answer(text, parse_mode="HTML")


@router.message(F.text == "üë• –ö–ª–∏–µ–Ω—Ç—ã")
async def menu_clients(message: types.Message):
    """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–∫–∏ –ö–ª–∏–µ–Ω—Ç—ã"""
    text = """
üë• <b>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞–º–∏</b>

<b>–§—É–Ω–∫—Ü–∏–∏:</b>
‚Ä¢ –ë–∞–∑–∞ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤ –ø–æ–∫—É–ø–∞—Ç–µ–ª–µ–π –∏ –ø—Ä–æ–¥–∞–≤—Ü–æ–≤
‚Ä¢ –ò—Å—Ç–æ—Ä–∏—è –≤—Å—Ç—Ä–µ—á –∏ –∑–≤–æ–Ω–∫–æ–≤
‚Ä¢ –ó–∞–º–µ—Ç–∫–∏ –∏ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è
‚Ä¢ –°—Ç–∞—Ç—É—Å —Å–¥–µ–ª–æ–∫

<b>–ö–æ–º–∞–Ω–¥—ã:</b>
‚Ä¢ "–¥–æ–±–∞–≤–∏—Ç—å –∫–ª–∏–µ–Ω—Ç–∞ –ò–≤–∞–Ω–æ–≤ +79991234567"
‚Ä¢ "–Ω–∞–π—Ç–∏ –∫–ª–∏–µ–Ω—Ç–∞ –ü–µ—Ç—Ä–æ–≤"
‚Ä¢ "–ø–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤"

<i>–ú–æ–¥—É–ª—å –∫–ª–∏–µ–Ω—Ç–æ–≤ –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ...</i>
    """
    await message.answer(text, parse_mode="HTML")


@router.message(F.text == "üè† –û–±—ä–µ–∫—Ç—ã")
async def menu_properties(message: types.Message):
    """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–∫–∏ –û–±—ä–µ–∫—Ç—ã"""
    text = """
üè† <b>–ö–∞—Ç–∞–ª–æ–≥ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏</b>

<b>–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:</b>
‚Ä¢ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤
‚Ä¢ –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ –∏ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏
‚Ä¢ –°—Ç–∞—Ç—É—Å –ø—Ä–æ–¥–∞–∂
‚Ä¢ –ò—Å—Ç–æ—Ä–∏—è –ø–æ–∫–∞–∑–æ–≤

<b>–ö–æ–º–∞–Ω–¥—ã:</b>
‚Ä¢ "–¥–æ–±–∞–≤–∏—Ç—å –∫–≤–∞—Ä—Ç–∏—Ä—É 2-–∫–æ–º–Ω –õ–µ–Ω–∏–Ω–∞ 15"
‚Ä¢ "–ø–æ–∫–∞–∑–∞—Ç—å –æ–±—ä–µ–∫—Ç—ã –≤ –ø—Ä–æ–¥–∞–∂–µ"
‚Ä¢ "–æ–±—ä–µ–∫—Ç –ø—Ä–æ–¥–∞–Ω"

<i>–ú–æ–¥—É–ª—å –æ–±—ä–µ–∫—Ç–æ–≤ –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ...</i>
    """
    await message.answer(text, parse_mode="HTML")


@router.message(F.text == "üìä –ê–Ω–∞–ª–∏—Ç–∏–∫–∞")
async def menu_analytics(message: types.Message):
    """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–∫–∏ –ê–Ω–∞–ª–∏—Ç–∏–∫–∞"""
    text = """
üìä <b>–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ –æ—Ç—á–µ—Ç—ã</b>

<b>–î–æ—Å—Ç—É–ø–Ω—ã–µ –æ—Ç—á–µ—Ç—ã:</b>
‚Ä¢ –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–∫–∞–∑–æ–≤ –∑–∞ –ø–µ—Ä–∏–æ–¥
‚Ä¢ –ö–æ–Ω–≤–µ—Ä—Å–∏—è –≤ —Å–¥–µ–ª–∫–∏
‚Ä¢ –î–æ—Ö–æ–¥—ã –ø–æ –º–µ—Å—è—Ü–∞–º
‚Ä¢ –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —Ä–∞–±–æ—Ç—ã

<b>–ö–æ–º–∞–Ω–¥—ã:</b>
‚Ä¢ "—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞ –º–µ—Å—è—Ü"
‚Ä¢ "—Å–∫–æ–ª—å–∫–æ –ø–æ–∫–∞–∑–æ–≤ –∑–∞ –Ω–µ–¥–µ–ª—é"
‚Ä¢ "–æ—Ç—á–µ—Ç –ø–æ –ø—Ä–æ–¥–∞–∂–∞–º"

<i>–ú–æ–¥—É–ª—å –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ...</i>
    """
    await message.answer(text, parse_mode="HTML")


@router.message(F.text == "‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏")
async def menu_settings(message: types.Message):
    """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–∫–∏ –ù–∞—Å—Ç—Ä–æ–π–∫–∏"""
    text = """
‚öôÔ∏è <b>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ—Ñ–∏–ª—è</b>

<b>–î–æ—Å—Ç—É–ø–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:</b>
‚Ä¢ –í—Ä–µ–º–µ–Ω–Ω–∞—è –∑–æ–Ω–∞
‚Ä¢ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∏ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è
‚Ä¢ –Ø–∑—ã–∫ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
‚Ä¢ –†–∞–±–æ—á–∏–µ —á–∞—Å—ã

<b>–ö–æ–º–∞–Ω–¥—ã:</b>
‚Ä¢ "—É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —á–∞—Å–æ–≤–æ–π –ø–æ—è—Å –ú–æ—Å–∫–≤–∞"
‚Ä¢ "–≤–∫–ª—é—á–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è"
‚Ä¢ "—Ä–∞–±–æ—á–∏–µ —á–∞—Å—ã —Å 9 –¥–æ 18"

<i>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ...</i>
    """
    await message.answer(text, parse_mode="HTML")


@router.message(F.text == "‚ùì –ü–æ–º–æ—â—å")
async def menu_help(message: types.Message):
    """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–∫–∏ –ü–æ–º–æ—â—å"""
    # –ò—Å–ø–æ–ª—å–∑—É–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ help
    await cmd_help(message)


def register_handlers(dp: Router) -> None:
    """–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤"""
    dp.include_router(router) 